(()=>{"use strict";var e={276:(e,t,a)=>{var s=a(751),o=a(641);function i(e,t){const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[t[0]||(t[0]=(0,o.Lk)("nav",null,null,-1)),(0,o.bF)(a)],64)}var r=a(262);const n={},l=(0,r.A)(n,[["render",i]]),c=l;var u=a(220),d=a(33);const p={class:"home"},g={class:"home-content"},h={class:"home-info-container"},m={class:"map-border"},k={ref:"mapContainer",class:"map"},v={class:"home-info-list"},b={class:"search-bar"},f={class:"street-name"},L={class:"profile-info"},y=["src"],w={class:"profile-name"};function C(e,t,a,i,r,n){const l=(0,o.g2)("Navbar");return(0,o.uX)(),(0,o.CE)("div",p,[(0,o.bF)(l),(0,o.Lk)("div",g,[t[1]||(t[1]=(0,o.Lk)("p",{class:"home-title"},"Інтерактивна ретро-карта міста Львів",-1)),(0,o.Lk)("div",h,[(0,o.Lk)("div",m,[(0,o.Lk)("div",k,null,512)]),(0,o.Lk)("div",v,[(0,o.Lk)("div",b,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),placeholder:"Пошук..."},null,512),[[s.Jo,r.searchQuery]])]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.filteredItems,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:"home-info-item",key:t},[(0,o.Lk)("div",f,(0,d.v_)(e.street),1),(0,o.Lk)("div",L,[(0,o.Lk)("img",{src:e.profileImage,alt:"Profile",class:"profile-image"},null,8,y),(0,o.Lk)("p",w,(0,d.v_)(e.profileName),1)])])))),128))])])])])}const D=a.p+"img/Logo(big).03776db6.png",E={class:"navbar"},_={class:"navbar-brand"},I={class:"navbar-menu"},F={key:0,class:"navbar-start"},x={key:1,class:"navbar-start"},U={class:"navbar-profile"},X={class:"profile-pic-wrapper"},j=["src"],A={class:"navbar-profile-email"};function Q(e,t,a,s,i,r){const n=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("nav",null,[(0,o.Lk)("div",E,[(0,o.Lk)("div",_,[(0,o.bF)(n,{to:"/home",class:"navbar-item"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.Lk)("img",{src:D,alt:"Logo"},null,-1)]))),_:1})]),(0,o.Lk)("div",I,[i.user?((0,o.uX)(),(0,o.CE)("div",F,[(0,o.bF)(n,{to:"/create-location",class:"navbar-item",id:"link"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Додати локацію")]))),_:1}),(0,o.bF)(n,{to:"/confirmation",class:"navbar-item",id:"link"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Мої публікації")]))),_:1}),(0,o.bF)(n,{to:"/home",class:"navbar-item",id:"link"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("Написати відгук")]))),_:1})])):((0,o.uX)(),(0,o.CE)("div",x,[(0,o.bF)(n,{to:"/home",class:"navbar-item",id:"link"},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("Написати відгук")]))),_:1})]))]),(0,o.Lk)("div",U,[i.user?((0,o.uX)(),(0,o.Wv)(n,{key:0,to:"/profile",class:"navbar-profile-link",id:"link"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",X,[(0,o.Lk)("img",{src:i.user.profilePicture,alt:"Profile"},null,8,j)]),(0,o.Lk)("p",A,(0,d.v_)(i.user.email),1)])),_:1})):((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.bF)(n,{to:"/login",class:"navbar-item",id:"link"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("Увійти")]))),_:1}),(0,o.bF)(n,{to:"/registration",class:"navbar-item",id:"link"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("Зареєструватись")]))),_:1})],64))])])])}var S=a(783),$=a(884);const z={data(){return{user:null}},created(){const e=(0,S.xI)();e.onAuthStateChanged((async e=>{e?(this.user=e,await this.fetchUserData(e.uid)):this.user=null}))},methods:{async fetchUserData(e){const t=(0,$.aU)(),a=(0,$.H9)(t,"users",e),s=await(0,$.x7)(a);s.exists()?this.user={...this.user,...s.data()}:console.log("User not found in Firestore")},async logout(){try{await signOut((0,S.xI)()),this.$router.push("/")}catch(e){console.error("Logout error",e)}}}},J=(0,r.A)(z,[["render",Q],["__scopeId","data-v-8fa82af2"]]),M=J;var N=a(842),O=a.n(N);const W={components:{Navbar:M},data(){return{searchQuery:"",items:[{street:"Вулиця Шевченка",profileImage:"https://firebasestorage.googleapis.com/v0/b/kursova-5374b.appspot.com/o/bach%2F491004389_596021710156389_1039114513883964411_n.jpg?alt=media&token=63353374-7c0a-4060-b208-1310f3f67bce",profileName:"Профіль 1"},{street:"Вулиця Франка",profileImage:"https://firebasestorage.googleapis.com/v0/b/kursova-5374b.appspot.com/o/bach%2F491004389_596021710156389_1039114513883964411_n.jpg?alt=media&token=63353374-7c0a-4060-b208-1310f3f67bce",profileName:"Профіль 2"}]}},computed:{filteredItems(){return this.items.filter((e=>e.street.toLowerCase().includes(this.searchQuery.toLowerCase())))}},mounted(){O().accessToken="pk.eyJ1IjoibHZxMWljZW1hbiIsImEiOiJjbHU4ZmtuZ2MwYzRvMm9yeGQzZnBycjBkIn0.u4QC3601L2OcFCzw8kzvmw";new(O().Map)({container:this.$refs.mapContainer,style:"mapbox://styles/lvq1iceman/cm9ootxch009b01qs40wa1c8q",center:[24.0315,49.8397],zoom:13})}},Z=(0,r.A)(W,[["render",C],["__scopeId","data-v-e3bd9864"]]),P=Z,B={class:"start"},H={class:"island"},R={class:"island-buttons"};function T(e,t,a,s,i,r){const n=(0,o.g2)("BackgroundSlider"),l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",B,[(0,o.bF)(n),(0,o.Lk)("div",H,[t[3]||(t[3]=(0,o.Lk)("div",{class:"island-border"},[(0,o.Lk)("img",{src:D,alt:"Island",class:"island-image"}),(0,o.Lk)("p",{class:"island-text"}," Ласкаво просимо до Past View — унікального сервісу, що переносить вас у минуле міста. Натискайте на точки на карті, щоб побачити старовинні фотографії та дізнатися історії цих місць. Зареєструйтеся, щоб додавати власні знімки, коментувати й ділитися своїми враженнями. Відчуйте історію міста по-новому! ")],-1)),(0,o.Lk)("div",R,[(0,o.bF)(l,{to:"/home",class:"button-i"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("Почати")]))),_:1}),(0,o.bF)(l,{to:"/login",class:"button-i"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("Увійти")]))),_:1}),(0,o.bF)(l,{to:"/registration",class:"button-i"},{default:(0,o.k6)((()=>t[2]||(t[2]=[(0,o.eW)("Зареєструватись")]))),_:1})])])])}const V={class:"background-slider"},q={class:"gallery"},K=["src"];function G(e,t,a,s,i,r){return(0,o.uX)(),(0,o.CE)("div",V,[(0,o.Lk)("div",q,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.images,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,d.C4)(["gallery-item",{active:t===i.currentIndex}]),key:t},[(0,o.Lk)("img",{src:e,alt:"gallery-image"},null,8,K)],2)))),128))])])}const Y={name:"BackgroundSlider",data(){return{currentIndex:0,images:["https://firebasestorage.googleapis.com/v0/b/kursova-5374b.appspot.com/o/bach%2Fbackground%2Flviv-zgori.png?alt=media&token=8560ad72-e2e9-4930-a069-3113a37b9455","https://firebasestorage.googleapis.com/v0/b/kursova-5374b.appspot.com/o/bach%2Fbackground%2Fdvometrovi-stiny-snigu-na-vul.-stryjskij.-foto-1920-1930-h-rr.%202.png?alt=media&token=085ed21c-1c34-4afb-a181-b89149a4409c","https://firebasestorage.googleapis.com/v0/b/kursova-5374b.appspot.com/o/bach%2Fbackground%2Fpelchinskiy-stav-i-tsitadel-u-1893-rotsi.png?alt=media&token=6da1184d-113b-41d1-b0fc-9203cbd9cd44","https://firebasestorage.googleapis.com/v0/b/kursova-5374b.appspot.com/o/bach%2Fbackground%2Ftramvay-12-yide-vniz-po-vul.-krivonosa.png?alt=media&token=f3ffc1b1-686c-406c-8c65-c60b1897aa1d"]}},mounted(){setInterval((()=>{this.currentIndex=(this.currentIndex+1)%this.images.length}),6e3)}},ee=(0,r.A)(Y,[["render",G],["__scopeId","data-v-48cad606"]]),te=ee,ae={components:{BackgroundSlider:te}},se=(0,r.A)(ae,[["render",T],["__scopeId","data-v-38f70244"]]),oe=se,ie={class:"start"},re={class:"login-container"},ne={class:"login-inputs"},le={class:"login-buttons"},ce=["onClick"],ue={key:0,class:"error-text"};function de(e,t,a,i,r,n){const l=(0,o.g2)("BackgroundSlider"),c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ie,[(0,o.bF)(l),(0,o.Lk)("div",re,[t[5]||(t[5]=(0,o.Lk)("img",{src:D,alt:"Logo",class:"logo-small"},null,-1)),t[6]||(t[6]=(0,o.Lk)("h2",{class:"login-title"},"Вхід",-1)),(0,o.Lk)("div",ne,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),type:"text",placeholder:"Логін",class:(0,d.C4)(["login-input",{"input-error":r.loginError}]),onKeyup:t[1]||(t[1]=(0,s.jR)(((...e)=>n.login&&n.login(...e)),["enter"]))},null,34),[[s.Jo,r.email]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.password=e),type:"password",placeholder:"Пароль",class:(0,d.C4)(["login-input",{"input-error":r.loginError}]),onKeyup:t[3]||(t[3]=(0,s.jR)(((...e)=>n.login&&n.login(...e)),["enter"]))},null,34),[[s.Jo,r.password]])]),(0,o.Lk)("div",le,[(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.login&&n.login(...e)),class:"login-button"},"Увійти"),(0,o.bF)(c,{to:"/",custom:""},{default:(0,o.k6)((({navigate:e})=>[(0,o.Lk)("button",{onClick:e,class:"login-button"},"Скасувати",8,ce)])),_:1})]),r.loginError?((0,o.uX)(),(0,o.CE)("div",ue,"Неправильні логін або пароль")):(0,o.Q3)("",!0)])])}const pe={components:{BackgroundSlider:te},data(){return{email:"",password:"",loginError:!1}},methods:{async login(){const e=(0,S.xI)();try{await(0,S.x9)(e,this.email,this.password),console.log("Успішний вхід!"),this.$router.push("/home"),this.loginError=!1}catch(t){console.error("Помилка входу:",t.message),this.loginError=!0}}}},ge=(0,r.A)(pe,[["render",de],["__scopeId","data-v-be9f99c2"]]),he=ge,me={class:"start"},ke={class:"registation-container"},ve={class:"registation-inputs"},be={key:0,class:"error-text"},fe={key:1,class:"error-text"},Le={key:2,class:"error-text"},ye={class:"registation-buttons"},we=["onClick"];function Ce(e,t,a,i,r,n){const l=(0,o.g2)("BackgroundSlider"),c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",me,[(0,o.bF)(l),(0,o.Lk)("div",ke,[t[4]||(t[4]=(0,o.Lk)("img",{src:D,alt:"Logo",class:"logo-small"},null,-1)),t[5]||(t[5]=(0,o.Lk)("h2",{class:"registation-title"},"Реєстрація",-1)),(0,o.Lk)("div",ve,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),type:"text",placeholder:"Ім’я користувача",class:(0,d.C4)(["registation-input",{"input-error":r.usernameError}])},null,2),[[s.Jo,r.username]]),r.usernameError?((0,o.uX)(),(0,o.CE)("div",be,"Ім’я користувача обов’язкове")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.email=e),type:"text",placeholder:"Email",class:(0,d.C4)(["registation-input",{"input-error":r.emailError}])},null,2),[[s.Jo,r.email]]),r.emailError?((0,o.uX)(),(0,o.CE)("div",fe,"Неправильний формат email")):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.password=e),type:"password",placeholder:"Пароль",class:(0,d.C4)(["registation-input",{"input-error":r.passwordError}])},null,2),[[s.Jo,r.password]]),r.passwordError?((0,o.uX)(),(0,o.CE)("div",Le," Пароль повинен містити мінімум 6 символів, цифри та букви ")):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ye,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.register&&n.register(...e)),class:"registation-button"},"Зареєструватись"),(0,o.bF)(c,{to:"/",custom:""},{default:(0,o.k6)((({navigate:e})=>[(0,o.Lk)("button",{onClick:e,class:"registation-button"},"Скасувати",8,we)])),_:1})])])])}const De={components:{BackgroundSlider:te},data(){return{username:"",email:"",password:"",usernameError:!1,emailError:!1,passwordError:!1}},methods:{validateEmail(e){const t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;return t.test(e)},validatePassword(e){const t=/^(?=.*[a-zA-Z])(?=.*\d).{6,}$/;return t.test(e)},async register(){if(this.usernameError=!this.username.trim(),this.emailError=!this.validateEmail(this.email),this.passwordError=!this.validatePassword(this.password),this.usernameError||this.emailError||this.passwordError)return;const e=(0,S.xI)();try{const t=await(0,S.eJ)(e,this.email,this.password),a=t.user,s=(0,$.aU)(),o=(0,$.H9)(s,"users",a.uid);await(0,$.BN)(o,{email:this.email,username:this.username,role:"user",profilePicture:"https://firebasestorage.googleapis.com/v0/b/kursova-5374b.appspot.com/o/bach%2F491004389_596021710156389_1039114513883964411_n.jpg?alt=media&token=63353374-7c0a-4060-b208-1310f3f67bce",createdAt:new Date,uid:a.uid}),console.log("Реєстрація та запис в Firestore успішні!"),this.$router.push("/home")}catch(t){console.error("Помилка реєстрації:",t.message),"auth/email-already-in-use"===t.code||"auth/invalid-email"===t.code?this.emailError=!0:"auth/weak-password"===t.code&&(this.passwordError=!0)}}}},Ee=(0,r.A)(De,[["render",Ce],["__scopeId","data-v-756f52d5"]]),_e=Ee,Ie={class:"profile-view"},Fe={class:"profile-content"},xe={key:0,class:"profile-island"},Ue={class:"profile-info"},Xe=["src"],je={class:"profile-right"},Ae={class:"profile-det"},Qe={class:"profile-usr"},Se={class:"profile-name"},$e={class:"profile-date"},ze={key:0},Je={class:"buttons-row-e"},Me={key:1},Ne={class:"profile-description"},Oe={key:0,class:"buttons-row"};function We(e,t,a,i,r,n){const l=(0,o.g2)("Navbar");return(0,o.uX)(),(0,o.CE)("div",Ie,[(0,o.bF)(l),(0,o.Lk)("div",Fe,[r.userData?((0,o.uX)(),(0,o.CE)("div",xe,[(0,o.Lk)("div",Ue,[(0,o.Lk)("img",{src:r.userData.profilePicture,alt:"Profile",class:"profile-image"},null,8,Xe),(0,o.Lk)("div",je,[(0,o.Lk)("div",Ae,[(0,o.Lk)("div",Qe,[(0,o.Lk)("p",Se,"@"+(0,d.v_)(r.userData.username),1),(0,o.Lk)("p",$e," Профіль створено "+(0,d.v_)(n.formatDate(r.userData.createdAt)),1)]),r.editingDescription?((0,o.uX)(),(0,o.CE)("div",ze,[(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.newDescription=e),class:"profile-description-textarea",rows:"4",placeholder:"Редагувати опис..."},null,512),[[s.Jo,r.newDescription]]),(0,o.Lk)("div",Je,[(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.saveDescription&&n.saveDescription(...e)),class:"br"},"Зберегти"),(0,o.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>n.cancelEdit&&n.cancelEdit(...e)),class:"br"},"Скасувати")])])):((0,o.uX)(),(0,o.CE)("div",Me,[(0,o.Lk)("p",Ne,(0,d.v_)(r.userData.description||"Цей користувач ще не додав опис."),1)]))]),r.editingDescription?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Oe,[(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>n.editDescription&&n.editDescription(...e)),class:"description-edit br"},"Редагувати опис"),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>n.logout&&n.logout(...e)),class:"logout br"},"Вийти з профілю"),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.deleteAccount&&n.deleteAccount(...e)),class:"delete br"},"Видалити профіль")]))])])])):(0,o.Q3)("",!0)])])}const Ze={name:"ProfileView",components:{Navbar:M},data(){return{userData:null,editingDescription:!1,newDescription:""}},methods:{async fetchUserData(e){const t=(0,$.aU)(),a=(0,$.H9)(t,"users",e),s=await(0,$.x7)(a);s.exists()?this.userData=s.data():console.error("Документ не знайдено!")},formatDate(e){if(!e)return"невідомо";const t=e.toDate?e.toDate():new Date(e);return t.toLocaleDateString("uk-UA")},editDescription(){this.editingDescription=!0,this.newDescription=this.userData.description||""},async saveDescription(){if(this.newDescription!==this.userData.description){const e=(0,$.aU)(),t=(0,$.H9)(e,"users",this.userData.uid);await(0,$.mZ)(t,{description:this.newDescription}),this.userData.description=this.newDescription}this.editingDescription=!1},cancelEdit(){this.editingDescription=!1,this.newDescription=this.userData.description||""},logout(){const e=(0,S.xI)();(0,S.CI)(e).then((()=>{this.$router.push("/")})).catch((e=>{console.error("Помилка при виході: ",e)}))},async deleteAccount(){const e=(0,S.xI)(),t=(0,$.aU)();try{await(0,$.kd)((0,$.H9)(t,"users",this.userData.uid)),await e.currentUser.delete(),this.$router.push("/")}catch(a){console.error("Помилка при видаленні акаунта: ",a)}}},mounted(){const e=(0,S.xI)();(0,S.hg)(e,(e=>{e?this.fetchUserData(e.uid):this.$router.push("/")}))}},Pe=(0,r.A)(Ze,[["render",We],["__scopeId","data-v-315eb269"]]),Be=Pe,He={class:"create"},Re={class:"island-create"},Te={class:"b-c"},Ve={class:"l-c"},qe={key:0,class:"suggestions"},Ke=["onClick"],Ge={ref:"mapContainer",class:"location-map"},Ye={class:"b-c"},et={class:"l-c"},tt={class:"b-c-det"},at={class:"location-buttons"};function st(e,t,a,i,r,n){const l=(0,o.g2)("Navbar");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(l),(0,o.Lk)("div",He,[(0,o.Lk)("div",Re,[t[19]||(t[19]=(0,o.Lk)("p",{class:"location-title"},"Створення локації",-1)),(0,o.Lk)("div",Te,[(0,o.Lk)("div",Ve,[t[15]||(t[15]=(0,o.Lk)("p",{class:"p-t"},"Додайте локацію",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),onInput:t[1]||(t[1]=(...e)=>n.fetchSuggestions&&n.fetchSuggestions(...e)),onKeydown:[t[2]||(t[2]=(0,s.jR)((e=>n.highlightSuggestion(1)),["down"])),t[3]||(t[3]=(0,s.jR)((e=>n.highlightSuggestion(-1)),["up"])),t[4]||(t[4]=(0,s.jR)(((...e)=>n.selectHighlighted&&n.selectHighlighted(...e)),["enter"]))],type:"text",placeholder:"Введіть адресу",class:"address-input"},null,544),[[s.Jo,r.searchQuery]]),r.suggestions.length?((0,o.uX)(),(0,o.CE)("ul",qe,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.suggestions,((e,t)=>((0,o.uX)(),(0,o.CE)("li",{key:t,class:(0,d.C4)({active:t===r.highlighted}),onClick:t=>n.selectSuggestion(e)},(0,d.v_)(e.place_name),11,Ke)))),128))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Ge,null,512)]),(0,o.Lk)("div",Ye,[(0,o.Lk)("div",et,[t[16]||(t[16]=(0,o.Lk)("p",{class:"p-t"},"Додайте зображення",-1)),(0,o.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>n.uploadImage&&n.uploadImage(...e)),class:"c-button"},"Додати фото"),(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.removeImage&&n.removeImage(...e)),class:"c-button"},"Видалити фото")]),r.imageUrl?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"image-preview",style:(0,d.Tr)({backgroundImage:`url(${r.imageUrl})`})},null,4)):((0,o.uX)(),(0,o.CE)("div",{key:1,class:"image-upload-area",onDrop:t[7]||(t[7]=(0,s.D$)(((...t)=>e.onDrop&&e.onDrop(...t)),["prevent"])),onDragover:t[8]||(t[8]=(0,s.D$)((()=>{}),["prevent"])),onDragstart:t[9]||(t[9]=(...e)=>n.startDrag&&n.startDrag(...e)),onDragend:t[10]||(t[10]=(...e)=>n.endDrag&&n.endDrag(...e)),style:(0,d.Tr)(r.dragStyle),draggable:"true"},t[17]||(t[17]=[(0,o.Lk)("span",null,"Перетягніть фото сюди",-1)]),36))]),(0,o.Lk)("div",tt,[t[18]||(t[18]=(0,o.Lk)("p",{class:"p-t"},"Створіть опис",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.locationName=e),type:"text",placeholder:"Введіть назву",class:"det-inp",required:""},null,512),[[s.Jo,r.locationName]]),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>r.locationDescription=e),type:"text",placeholder:"Введіть опис",class:"det-inp"},null,512),[[s.Jo,r.locationDescription]])]),(0,o.Lk)("div",at,[(0,o.Lk)("button",{onClick:t[13]||(t[13]=(...e)=>n.saveLocation&&n.saveLocation(...e)),class:"c-button b"},"Зберегти"),(0,o.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>n.cancel&&n.cancel(...e)),class:"c-button b"},"Скасувати")])])])],64)}var ot=a(904);O().accessToken="pk.eyJ1IjoibHZxMWljZW1hbiIsImEiOiJjbHU4ZmtuZ2MwYzRvMm9yeGQzZnBycjBkIn0.u4QC3601L2OcFCzw8kzvmw";const it={name:"CreateLocation",components:{Navbar:M},data(){return{map:null,marker:null,searchQuery:"",suggestions:[],highlighted:-1,imageUrl:"",locationName:"",locationDescription:"",isDragging:!1,dragStyle:{},locationCoords:null,imageFile:null}},methods:{async fetchSuggestions(){if(!this.searchQuery)return void(this.suggestions=[]);const e=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(this.searchQuery)}.json?access_token=${O().accessToken}&autocomplete=true&limit=5`),t=await e.json();this.suggestions=t.features},selectSuggestion(e){this.searchQuery=e.place_name,this.suggestions=[];const[t,a]=e.center;this.setMarker(t,a)},highlightSuggestion(e){const t=this.suggestions.length-1;t<0||(this.highlighted+=e,this.highlighted<0&&(this.highlighted=t),this.highlighted>t&&(this.highlighted=0))},selectHighlighted(){this.highlighted>=0&&this.highlighted<this.suggestions.length&&this.selectSuggestion(this.suggestions[this.highlighted])},setMarker(e,t){this.map&&(this.map.flyTo({center:[e,t],zoom:14}),this.marker?this.marker.setLngLat([e,t]):(this.marker=new(O().Marker)({color:"red",draggable:!0}).setLngLat([e,t]).addTo(this.map),this.marker.on("dragend",this.reverseGeocodeMarker)),this.reverseGeocodeMarker(),this.locationCoords={lng:e,lat:t})},async reverseGeocodeMarker(){const e=this.marker.getLngLat(),t=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${e.lng},${e.lat}.json?access_token=${O().accessToken}`),a=await t.json();a.features[0]&&(this.searchQuery=a.features[0].place_name)},uploadImage(){const e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=e=>{if(this.imageFile=e.target.files[0],this.imageFile){const e=new FileReader;e.onload=e=>{this.imageUrl=e.target.result},e.readAsDataURL(this.imageFile)}},e.click()},removeImage(){this.imageFile=null,this.imageUrl=""},startDrag(){this.isDragging=!0,this.dragStyle={cursor:"grabbing",opacity:.7}},endDrag(){this.isDragging=!1,this.dragStyle={}},async saveLocation(){if(!this.locationName||!this.searchQuery||!this.imageFile||!this.locationCoords)return void alert("Будь ласка, заповніть всі обов'язкові поля!");const e=(0,ot.c7)(),t=(0,ot.KR)(e,`locations/${Date.now()}_${this.imageFile.name}`);try{const e=await(0,ot.D)(t,this.imageFile),a=await(0,ot.qk)(e.ref),s=(0,$.aU)(),o=(0,S.xI)(),i=o.currentUser,r=(0,$.rJ)(s,"locations");await(0,$.gS)(r,{name:this.locationName,description:this.locationDescription,address:this.searchQuery,coordinates:this.locationCoords,userUid:i.uid,username:i.displayName,imageUrl:a,isPosted:!1,createdAt:$.Dc.fromDate(new Date)}),alert("Локацію успішно додано!"),this.clearForm()}catch(a){console.error("Error saving location:",a),alert("Сталася помилка при збереженні локації.")}},clearForm(){this.searchQuery="",this.locationName="",this.locationDescription="",this.imageFile=null,this.imageUrl="",this.locationCoords=null},cancel(){this.$router.push("/home")}},mounted(){this.map=new(O().Map)({container:this.$refs.mapContainer,center:[24.0315,49.8397],zoom:10,style:"mapbox://styles/lvq1iceman/cm9ootxch009b01qs40wa1c8q"}),this.map.on("load",(()=>{this.map.resize()})),this.map.on("click",(e=>{this.setMarker(e.lngLat.lng,e.lngLat.lat)}))}},rt=(0,r.A)(it,[["render",st],["__scopeId","data-v-4c97cf98"]]),nt=rt,lt=[{path:"/",name:"start",component:oe},{path:"/home",name:"home",component:P},{path:"/login",name:"login",component:he},{path:"/registration",name:"registration",component:_e},{path:"/profile",name:"profile",component:Be,meta:{requiresAuth:!0}},{path:"/create-location",name:"create-location",component:nt,meta:{requiresAuth:!0}}],ct=(0,u.aE)({history:(0,u.LA)("/"),routes:lt}),ut=()=>new Promise(((e,t)=>{const a=(0,S.hg)((0,S.xI)(),(t=>{a(),e(t)}),t)}));ct.beforeEach((async(e,t,a)=>{e.matched.some((e=>e.meta.requiresAuth))?await ut()?a():(console.log("You are not logged in"),a("/login")):a()}));const dt=ct;var pt=a(223);(0,s.Ef)(c).use(dt).mount("#app");const gt={apiKey:"AIzaSyA_e0D4JlvkLdZvTE3PA7hy0W15wTXuMxI",authDomain:"kursova-5374b.firebaseapp.com",databaseURL:"https://kursova-5374b-default-rtdb.europe-west1.firebasedatabase.app",projectId:"kursova-5374b",storageBucket:"kursova-5374b.appspot.com",messagingSenderId:"444568413958",appId:"1:444568413958:web:e4258c7fa4134d96fee087"},ht=(0,pt.Wp)(gt);(0,$.aU)(ht),(0,ot.c7)(ht)}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,(()=>{var e=[];a.O=(t,s,o,i)=>{if(!s){var r=1/0;for(u=0;u<e.length;u++){for(var[s,o,i]=e[u],n=!0,l=0;l<s.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((e=>a.O[e](s[l])))?s.splice(l--,1):(n=!1,i<r&&(r=i));if(n){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,o,i]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.p="/"})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var o,i,[r,n,l]=s,c=0;if(r.some((t=>0!==e[t]))){for(o in n)a.o(n,o)&&(a.m[o]=n[o]);if(l)var u=l(a)}for(t&&t(s);c<r.length;c++)i=r[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},s=self["webpackChunkdiploma_bach"]=self["webpackChunkdiploma_bach"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],(()=>a(276)));s=a.O(s)})();
//# sourceMappingURL=app.c1219c9d.js.map